{%- comment -%}
Add a footnote with the specified id.

Footnotes are numbered in order of id appearance, reusing an id displays the same number.

Args:
    id: The footnote id.
{%- endcomment -%}

{%- unless footnotes -%}
    {%- assign footnotes = "" | split: "" -%}
{%- endunless -%}
{%- if footnotes contains include.id -%}
    {%- for footnote_id in footnotes -%}
        {%- if footnote_id == include.id -%}
            <sup>{{- forloop.index -}}</sup>
            {%- break -%}
        {%- endif -%}
    {%- endfor -%}
{%- else -%}
    {%- assign footnotes = footnotes | push: include.id -%}
    <sup>{{- footnotes.size -}}</sup>
{%- endif -%}
